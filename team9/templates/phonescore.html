{% extends "base.html" %}

{% block app_content %}
<h3 class="text-muted" align="center">Phoning It In</h3>
<div class="jumbotron">
    <table title="Phone Scoring" class="table table-striped">
        {% if results %}
            <div class="table-striped">
                {% for result in results %}
                    <tr align="center">
                        <td>
                            <a title="display player stats"
                           class="tab"
                           href="{{ url_for('main.history', player_id=result.Player.idplayer) }}">
                            {{result.Player.FirstName}} {{result.Player.Surname}}</a>
                                ({{result.MatchUp.MyPlayerRank}})
                            <br>versus<br>
                            <a class="tab" title="show opponent history" href="{{ url_for('main.opponent', opp=result.MatchUp.OpponentName) }}">
                            {{result.MatchUp.OpponentName}}</a> ({{result.MatchUp.OpponentRank}})
                        </td>
                        <td>Race: {{'{} on {}'.format(hcaps[result.MatchUp.MyPlayerRank][result.MatchUp.OpponentRank][0],
                            hcaps[result.MatchUp.MyPlayerRank][result.MatchUp.OpponentRank][1])}}<br>
                            {% if result.MatchUp.WinLose == 'I' %}
                                <span class="label label-default">IN PROGRESS</span>
                            {% else %}
                                {% if result.MatchUp.WinLose == "W" %}
                                    <span class="label label-success">WIN {{result.MatchUp.MyPlayerScore}} : {{result.MatchUp.OpponentScore}}</span>
                                {% else %}
                                    <span class="label label-warning">LOSS {{result.MatchUp.MyPlayerScore}} : {{result.MatchUp.OpponentScore}}</span>
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                    {% if result.MatchUp.WinLose == "I" %}
                        <tr align="center">
                            {% if current_user.UserRole == 'Admin' or current_user.UserRole == 'Helper' %}
                                <td><a title="add one"
                                    class="btn btn-default btn-xs"
                                    href="{{ url_for('main.updatematchup', matchupid=result.MatchUp.idmatchup, player='MY', helper='phone') }}">
                                    +</a>
                                <a title="update live score"
                                   class="btn btn-default btn-xs"
                                    href="{{ url_for('main.livescore', matchupid=result.MatchUp.idmatchup, helper='phone') }}">
                                    {{result.MatchUp.MyPlayerScore}} : {{result.MatchUp.OpponentScore}}
                                    <span class="glyphicon glyphicon-edit">
                                </a>
                                <a title="add one"
                                   class="btn btn-default btn-xs"
                                    href="{{ url_for('main.updatematchup', matchupid=result.MatchUp.idmatchup, player='OPP', helper='phone') }}">
                                +</a>
                                </td>
                                <td><a class="btn btn-danger btn-xs"
                                       title="delete this match up"
                                       data-toggle="modal"
                                       data-target="#areyousureMatchUp{{result.MatchUp.idmatchup}}">
                                    Delete</a>
                                </td>
                            {% endif %}
                        </tr>
                        {% include '_areyousureMatchUp.html' %}
                    {% endif %}
                {% endfor %}
            </div>
        {% endif %}
    </table>
    <div class="row">
        <p align="center">Matches {{live.MatchUpsWon}} : {{live.MatchUpsLost}} -
                            Racks {{live.RacksWon}} : {{live.RacksLost}} </p>

    </div>
    <div class="row">
        <a class="btn btn-primary btn-sm" title="add head to head" href="{{ url_for('admin.addmatchup', matchid=nextmatch.idmatch) }}">
                        Add Match Up</a>
    </div>
</div>


{% endblock %}

